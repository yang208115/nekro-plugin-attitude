# Nekro Plugin Attitude

## 概述

**Nekro Plugin Attitude** 是一个为 Nekro Agent 设计的插件，它允许 AI 对不同的用户和群组展现出不同的态度。通过动态地记录和更新与用户及群组的交互信息，AI 可以在对话中表现出更加个性化和情境化的行为。

## 功能

- **动态态度调整**: AI 可以根据对话内容实时更新对用户或群组的态度。
- **个性化交互**: 允许 AI 对特定用户形成独特的印象和关系，例如“友好”、“警惕”等。
- **群组氛围感知**: AI 能够感知并适应不同群组的交流氛围。
- **工具化管理**: 提供了简单的工具函数，允许 AI 在思考过程中自主更新态度数据。

## 如何工作

该插件通过向 AI 的主提示词（Prompt）中注入上下文信息来工作。这些信息包括：

1.  **用户态度**: AI 对当前对话中每个用户的态度、关系和其他备注信息。
2.  **群组态度**: AI 对当前群组的整体态度和印象。

此外，插件还向 AI 提供了两个工具：

- `update_user_attitude`: 用于更新对特定用户的态度。
- `update_group_attitude`: 用于更新对特定群组的态度。

AI 被指示在每次回复前评估当前对话的上下文，如果检测到需要更新态度（例如，用户表现出明显的友好或敌意），它会调用相应的工具函数来记录这些变化。这些记录将影响未来的对话，使 AI 的回应更加连贯和智能。

## 配置

该插件无需额外配置，安装后即可自动运行。

## 使用示例

以下是一个简单的场景示例：

1.  **初始状态**: AI 对用户“张三”没有任何特殊态度。
2.  **交互**: 用户“张三”在群聊中多次帮助 AI 回答问题。
3.  **态度更新**: AI 在内部思考后，决定将对“张三”的态度更新为“友好”，关系更新为“乐于助人者”。它可能会调用 `update_user_attitude(user_key="张三的ID", attitude="友好", relationship="乐于助人者")`。
4.  **后续交互**: 在未来的对话中，当“张三”再次发言时，AI 会根据已记录的“友好”态度，以更加热情和积极的方式回应他。

## 技术细节

- **数据存储**: 插件使用 Nekro Agent 提供的存储接口来持久化用户和群组的态度数据。
- **提示词注入**: 通过 `mount_prompt_inject_method` 动态地将态度信息添加到 AI 的上下文中。
- **沙箱工具**: 通过 `mount_sandbox_method` 将更新态度的功能作为工具提供给 AI，使其能够在隔离的沙箱环境中安全地调用。

## WiKi

[![Ask DeepWiki](https://deepwiki.com/badge.svg)](https://deepwiki.com/yang208115/nekro-plugin-attitude)

---

**作者**: yang208115
**版本**: 0.0.1